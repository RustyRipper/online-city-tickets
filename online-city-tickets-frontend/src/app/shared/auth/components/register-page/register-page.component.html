<app-top-bar title="Register" />
<main>
  <form [formGroup]="form">
    <div class="field">
      <label for="fullName">Name</label>
      <input
        formControlName="fullName"
        id="fullName"
        pInputText
        type="text"
        required
      />
    </div>
    <small
      *ngIf="form.get('fullName')!.touched && form.get('fullName')!.errors"
      class="error"
    >
      This is not a valid full name.
    </small>
    <div class="field">
      <label for="email">Email</label>
      <input
        formControlName="email"
        id="email"
        pInputText
        type="email"
        aria-describedby="email-help"
        required
      />
    </div>
    <small
      *ngIf="form.get('email')!.touched && form.get('email')!.errors"
      class="error"
    >
      This is not a valid email.
    </small>
    <div class="field">
      <label for="password">Password</label>
      <p-password
        formControlName="password"
        inputId="password"
        feedback="false"
        toggleMask="true"
        required
      />
    </div>
    <small
      *ngIf="form.get('password')!.touched && form.get('password')!.errors"
      class="error"
    >
      The password is too short.
    </small>
    <div class="field">
      <label for="repeat">Repeat</label>
      <p-password
        formControlName="repeat"
        inputId="repeat"
        feedback="false"
        toggleMask="true"
        required
      />
    </div>
    <small
      *ngIf="form.get('repeat')!.touched && form.get('repeat')!.errors"
      class="error"
    >
      The passwords do not match.
    </small>
    <div class="center">
      <p-button
        [disabled]="!form.valid"
        [loading]="isLoading"
        (onClick)="onSubmit()"
        label="Register"
        type="submit"
        icon="pi pi-user-plus"
        iconPos="right"
      />
    </div>
    <small *ngIf="isError" class="error">Email already in use.</small>
  </form>
  <p-divider [align]="'center'">OR</p-divider>
  <div class="center">
    <a routerLink="/auth/login"
      ><p-button
        label="Login"
        icon="pi pi-sign-in"
        iconPos="right"
        severity="secondary"
    /></a>
  </div>
</main>
